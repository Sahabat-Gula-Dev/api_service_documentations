<h1>Food Service</h1>
<p>
  Endpoint-endpoint ini digunakan untuk mengelola semua data yang berkaitan
  dengan makanan, mulai dari melihat daftar, menambah, mengubah, hingga
  menghapus data makanan dan kategorinya.
</p>

<h2>Foods</h2>
<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-post">POST</span>
    <span class="endpoint-path">/foods</span>
  </div>
  <div class="endpoint-body">
    <h3>Tambah Makanan Baru</h3>
    <p>
      Menambahkan data makanan baru ke dalam database. Endpoint ini memerlukan
      otorisasi dan mengirim data sebagai
      <code>multipart/form-data</code> karena ada upload gambar.
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token</span>
    </div>
    <h3>Request Body <code>multipart/form-data</code></h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>name</code></td>
          <td>string</td>
          <td>Nama makanan. <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>photo_file</code></td>
          <td>file</td>
          <td>File gambar makanan. Opsional.</td>
        </tr>
        <tr>
          <td><code>description</code></td>
          <td>string</td>
          <td>Deskripsi singkat makanan. Opsional.</td>
        </tr>
        <tr>
          <td><code>category_id</code></td>
          <td>integer</td>
          <td>
            ID kategori yang sudah ada. Opsional, salah satu dari
            <code>category_id</code> atau <code>category_name</code> harus ada.
          </td>
        </tr>
        <tr>
          <td><code>category_name</code></td>
          <td>string</td>
          <td>Nama kategori baru yang akan dibuat. Opsional.</td>
        </tr>
        <tr>
          <td><code>serving_size</code></td>
          <td>integer</td>
          <td>Ukuran saji (misal: 1). <span class="required">Wajib.</span></td>
        </tr>
        <tr>
          <td><code>serving_unit</code></td>
          <td>string</td>
          <td>Satuan saji (misal: piring, mangkok). Opsional.</td>
        </tr>
        <tr>
          <td><code>weight_size</code></td>
          <td>integer</td>
          <td>
            Ukuran berat (misal: 150). <span class="required">Wajib.</span>
          </td>
        </tr>
        <tr>
          <td><code>weight_unit</code></td>
          <td>string</td>
          <td>Satuan berat (misal: gr). Opsional.</td>
        </tr>
        <tr>
          <td><code>calories</code></td>
          <td>number</td>
          <td>Jumlah kalori. Opsional.</td>
        </tr>
        <tr>
          <td><code>carbs</code></td>
          <td>number</td>
          <td>Jumlah karbohidrat (g). Opsional.</td>
        </tr>
        <tr>
          <td><code>protein</code></td>
          <td>number</td>
          <td>Jumlah protein (g). Opsional.</td>
        </tr>
        <tr>
          <td><code>fat</code></td>
          <td>number</td>
          <td>Jumlah lemak (g). Opsional.</td>
        </tr>
        <tr>
          <td><code>sugar</code></td>
          <td>number</td>
          <td>Jumlah gula (g). Opsional.</td>
        </tr>
        <tr>
          <td><code>sodium</code></td>
          <td>number</td>
          <td>Jumlah sodium (g, akan dikonversi dari mg). Opsional.</td>
        </tr>
        <tr>
          <td><code>fiber</code></td>
          <td>number</td>
          <td>Jumlah serat (g). Opsional.</td>
        </tr>
        <tr>
          <td><code>potassium</code></td>
          <td>number</td>
          <td>Jumlah kalium (g, akan dikonversi dari mg). Opsional.</td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>201 Created</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Makanan berhasil ditambahkan.",
    "data": {
        "food": {
            "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
            "name": "Ayam Bakar Madu",
            "photo_url": "https://url.supabase.co/storage/v1/object/public/foods/image.jpg",
            "description": "Ayam bakar dengan bumbu madu spesial, rendah kalori.",
            "category_id": 1,
            "serving_size": 1,
            "serving_unit": "potong",
            "weight_size": 150,
            "weight_unit": "gr",
            "calories": 250.5,
            "carbs": 5.2,
            "protein": 30.1,
            "fat": 12.5,
            "sugar": 4.0,
            "sodium": 0.25,
            "fiber": 0.5,
            "potassium": 0.3,
            "created_at": "2025-09-20T14:30:00.000Z"
        }
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/foods</span>
  </div>
  <div class="endpoint-body">
    <h3>Daftar Makanan</h3>
    <p>
      Mengambil daftar makanan dengan dukungan pagination, pencarian (query
      `q`), dan filter. Misalnya mencari makanan yang mengandung kata "ayam"
      maka <code>/foods?q=ayam</code>. Atau menampilkan makanan dari kategori ID
      1 maka <code>/foods?category_id=1</code>.
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-none">None</span>
    </div>
    <h3>Query Parameters</h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>q</code></td>
          <td>string</td>
          <td>Teks pencarian untuk nama atau deskripsi makanan. Opsional.</td>
        </tr>
        <tr>
          <td><code>category_id</code></td>
          <td>integer</td>
          <td>Filter berdasarkan ID kategori. Opsional.</td>
        </tr>
        <tr>
          <td><code>category_name</code></td>
          <td>string</td>
          <td>Filter berdasarkan nama kategori. Opsional.</td>
        </tr>
        <tr>
          <td><code>page</code></td>
          <td>integer</td>
          <td>Nomor halaman. Default: 1. Opsional.</td>
        </tr>
        <tr>
          <td><code>limit</code></td>
          <td>integer</td>
          <td>Jumlah item per halaman. Default: 20. Opsional.</td>
        </tr>
        <tr>
          <td><code>sort</code></td>
          <td>string</td>
          <td>
            Urutan pengurutan. Contoh: <code>name.asc</code>. Default:
            <code>created_at.desc</code>. Opsional.
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": [
        {
            "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
            "name": "Ayam Bakar Madu",
            "photo_url": "https://url.supabase.co/storage/v1/object/public/foods/image.jpg",
            "description": "Ayam bakar dengan bumbu madu spesial, rendah kalori.",
            "category_id": 1,
            "serving_size": 1,
            "serving_unit": "potong",
            "weight_size": 150,
            "weight_unit": "gr",
            "calories": 250.5,
            "created_at": "2025-09-20T14:30:00.000Z",
            "food_categories": {
                "id": 1,
                "name": "Lauk Pauk"
            }
        }
    ],
    "meta": { "page": 1, "limit": 20, "total": 45 }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/foods/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Detail Makanan</h3>
    <p>Mengambil detail satu data makanan berdasarkan ID-nya.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-none">None</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": {
        "food": {
            "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
            "name": "Ayam Bakar Madu",
            "photo_url": "https://url.supabase.co/storage/v1/object/public/foods/image.jpg",
            "description": "Ayam bakar dengan bumbu madu spesial, rendah kalori.",
            "category_id": 1,
            "serving_size": 1,
            "serving_unit": "potong",
            "weight_size": 150,
            "weight_unit": "gr",
            "calories": 250.5,
            "carbs": 5.2,
            "protein": 30.1,
            "fat": 12.5,
            "sugar": 4.0,
            "sodium": 0.25,
            "fiber": 0.5,
            "potassium": 0.3,
            "created_at": "2025-09-20T14:30:00.000Z",
            "food_categories": {
                "id": 1,
                "name": "Lauk Pauk"
            }
        }
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-put">PUT</span>
    <span class="endpoint-path">/foods/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Perbarui Makanan</h3>
    <p>
      Memperbarui data makanan berdasarkan ID. Semua field bersifat opsional
      (kirim hanya yang ingin diubah).
    </p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token</span>
    </div>
    <h3>Request Body <code>multipart/form-data</code></h3>
    <p>
      Sama seperti request body untuk <code>POST /foods</code>, tetapi semua
      field bersifat opsional.
    </p>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Makanan berhasil diperbarui.",
    "data": {
        "food": {
            "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
            "name": "Ayam Bakar Madu Pedas",
            "photo_url": "https://url.supabase.co/storage/v1/object/public/foods/image.jpg",
            "description": "Ayam bakar dengan bumbu madu spesial pedas, rendah kalori.",
            "category_id": 1,
            "serving_size": 1,
            "serving_unit": "potong",
            "weight_size": 150,
            "weight_unit": "gr",
            "calories": 255,
            "carbs": 5.5,
            "protein": 30.1,
            "fat": 12.8,
            "sugar": 4.2,
            "sodium": 0.26,
            "fiber": 0.6,
            "potassium": 0.31,
            "created_at": "2025-09-20T14:30:00.000Z"
        }
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-delete">DELETE</span>
    <span class="endpoint-path">/foods/{id}</span>
  </div>
  <div class="endpoint-body">
    <h3>Hapus Makanan</h3>
    <p>Menghapus data makanan secara permanen berdasarkan ID.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Makanan berhasil dihapus."
}</code></pre>
  </div>
</div>

<h2>Food Categories</h2>
<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-post">POST</span>
    <span class="endpoint-path">/food-categories</span>
  </div>
  <div class="endpoint-body">
    <h3>Buat Kategori Makanan Baru</h3>
    <p>Menambahkan kategori makanan baru.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-required">Bearer Token</span>
    </div>
    <h3>Request Body <code>application/json</code></h3>
    <table>
      <thead>
        <tr>
          <th>Key</th>
          <th>Tipe</th>
          <th>Deskripsi</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>name</code></td>
          <td>string</td>
          <td>Nama kategori baru. <span class="required">Wajib.</span></td>
        </tr>
      </tbody>
    </table>
    <h3>Success Response <code>201 Created</code></h3>
    <pre><code>{
    "status": "success",
    "message": "Kategori berhasil ditambahkan.",
    "data": {
        "category": { "id": 3, "name": "Camilan Sehat" }
    }
}</code></pre>
  </div>
</div>

<div class="endpoint-card">
  <div class="endpoint-header">
    <span class="endpoint-method method-get">GET</span>
    <span class="endpoint-path">/food-categories</span>
  </div>
  <div class="endpoint-body">
    <h3>Daftar Kategori Makanan</h3>
    <p>Mengambil daftar semua kategori makanan.</p>
    <div class="auth-badge">
      Authorization: <span class="auth-none">None</span>
    </div>
    <h3>Success Response <code>200 OK</code></h3>
    <pre><code>{
    "status": "success",
    "data": [
        { "id": 1, "name": "Lauk Pauk" },
        { "id": 2, "name": "Sayuran" }
    ]
}</code></pre>
  </div>
</div>
